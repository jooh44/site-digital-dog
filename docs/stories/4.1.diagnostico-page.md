# Story 4.1: Diagn√≥stico Page

**Epic:** 4 - Conversion Flow  
**Status:** Draft  
**Sprint:** 4 (Semanas 7-8)  
**Prioridade:** üî¥ Cr√≠tica

---

## Story

**As a** website visitor,  
**I want** to fill out a pre-qualification form to schedule a free diagnostic,  
**so that** I can take the first step to transform my veterinary clinic.

---

## Acceptance Criteria

1. Page created at `/diagnostico`
2. H1: "Diagn√≥stico Estrat√©gico Gratuito"
3. Subtitle: "Descubra potencial da sua cl√≠nica em 45min"
4. Form with all required fields (name, email, phone, clinic, city/state, revenue, challenge, referral, newsletter)
5. Form validation with Zod + React Hook Form
6. Responsive and accessible layout

---

## Tasks / Subtasks

- [ ] Task 1: Create Page Route (AC: 1)
  - [ ] Create `app/diagnostico/page.tsx`
  - [ ] Set up page structure
  - [ ] Add metadata

- [ ] Task 2: Implement Form Section (AC: 2, 3)
  - [ ] Add H1 and subtitle
  - [ ] Add "O que voc√™ vai receber" section
  - [ ] Create form component

- [ ] Task 3: Create Form Component (AC: 4, 5)
  - [ ] Create `components/forms/DiagnosticoForm.tsx`
  - [ ] Install React Hook Form: `npm install react-hook-form`
  - [ ] Install Zod: `npm install zod`
  - [ ] Install zod resolver: `npm install @hookform/resolvers`
  - [ ] Add all form fields:
    - [ ] Nome (text, required)
    - [ ] Email (email, required)
    - [ ] Telefone (tel, required)
    - [ ] Cl√≠nica (text, required)
    - [ ] Cidade/Estado (text, required)
    - [ ] Faturamento mensal (select, required)
    - [ ] Maior desafio (textarea, required)
    - [ ] Como conheceu (text, optional)
    - [ ] Newsletter opt-in (checkbox)

- [ ] Task 4: Implement Form Validation (AC: 5)
  - [ ] Create Zod schema for form validation
  - [ ] Connect Zod to React Hook Form
  - [ ] Add error messages
  - [ ] Test validation rules

- [ ] Task 5: Style Form (AC: 6)
  - [ ] Use design system Input component
  - [ ] Ensure accessibility (labels, error states)
  - [ ] Responsive layout
  - [ ] Proper spacing

---

## Dev Notes

### Previous Story Insights
[From Story 1.2]
- Input component available
- Design system implemented
[From Story 1.3]
- Database schema ready (Contact model)

### Form Specifications
[Source: prd/requisitos-funcionais-mvp.md - Section 3.5]

**Form Fields:**
- Nome, Email, Telefone, Cl√≠nica, Cidade/Estado (required)
- Faturamento mensal (select, required)
- Maior desafio (textarea, required)
- Como conheceu (optional)
- Newsletter opt-in (checkbox)

### Form Validation
[Source: architecture/api-endpoints.md - Section 6]

Zod schema should match API endpoint validation:
```typescript
const contactSchema = z.object({
  name: z.string().min(1),
  email: z.string().email(),
  phone: z.string().min(1),
  clinicName: z.string().min(1),
  city: z.string().min(1),
  state: z.string().min(1),
  monthlyRevenue: z.string().min(1),
  mainChallenge: z.string().min(1),
  referralSource: z.string().optional(),
  acceptsEmails: z.boolean(),
});
```

### File Locations
[Source: architecture/source-tree.md]

- Page: `app/diagnostico/page.tsx`
- Form component: `components/forms/DiagnosticoForm.tsx`

### Accessibility
[Source: prd/requisitos-nao-funcionais.md]

- Labels for all inputs
- Error messages accessible
- Keyboard navigation
- Focus visible

### Testing
[Source: architecture/testing-strategy.md]

**Testing Standards:**
- Test form validation
- Test all fields
- Test accessibility
- For this story: Manual testing sufficient (API integration in Story 4.3)

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-17 | 1.0 | Initial story creation | SM (Bob) |

---

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent_

### Debug Log References
_To be filled by Dev Agent_

### Completion Notes List
_To be filled by Dev Agent_

### File List
_To be filled by Dev Agent_

---

## QA Results
_To be filled by QA Agent_

---

